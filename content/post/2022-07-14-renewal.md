---
title: VuePressã‹ã‚‰Nuxt3ã«ç§»è¡Œã—ã¾ã—ãŸ
description: ã“ã®ã‚µã‚¤ãƒˆã‚’VuePressã‹ã‚‰Nuxt.jsã®3.xç³»ã«ç§»è¡Œã—ãŸè©±
date: 2022-07-14
draft: true
---

# VuePressã‹ã‚‰Nuxt3ã«ç§»è¡Œã—ã¾ã—ãŸ

## ç§»è¡Œã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

- ãªã‚“ã¨ãªãReactãŒåˆ†ã‹ã£ã¦ãã¦ä»•äº‹ã§ä½¿ã„ãŸã„ã¨æ€ã£ãŸ
- ä¸€æ–¹Vueã¯è¶£å‘³ã§ä½¿ã„ç¶šã‘ãŸã„
- Nuxt3ä½¿ã£ã¦ã¿ãŸã„
- VuePressã ã¨ãƒ‡ã‚¶ã‚¤ãƒ³ã¨ã‹ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã®ä¿®æ­£ãŒè¡Œã„ã¥ã‚‰ã„

ã¿ãŸã„ãªè€ƒãˆãŒã‚ã£ãŸã®ã§ã™ãŒãã“ã¾ã§ä½œã‚ŠãŸã„ã‚‚ã®ã‚‚ä»Šã®ã¨ã“ã‚ãªã„ã®ã§ã¨ã‚Šã‚ãˆãšæ”¾ç½®æ°—å‘³ã«ãªã£ã¦ã„ãŸã“ã®ã‚µã‚¤ãƒˆã‚’æ”¹ä¿®ã—ã‚ˆã†ã¨æ€ã„ã¾ã—ãŸã€‚  
ä¸€å¿œVuePressã®ã¾ã¾ã§ã‚‚å•é¡Œã¯ãªã‹ã£ãŸãŒã€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚‚ç›´ã—ãŸã„ç®‡æ‰€ãŒãŸãã•ã‚“ã‚ã£ãŸã®ã§Nuxt3ã¸ã®ç§»è¡Œã‚’æ±ºã‚ã¾ã—ãŸã€‚

## ç§»è¡Œä½œæ¥­

ç§»è¡Œä½œæ¥­ã§ã¯ä¸‹è¨˜ã‚’ç›®æ¨™ã¨ã—ã¦ä½œæ¥­ã—ã¾ã—ãŸã€‚

- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã¨ãƒ†ãƒ¼ãƒåˆ‡æ›¿ãˆã®å®Ÿè£…
- ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã¾ã¨ã‚ã‚‹

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»ç’°å¢ƒè¨­å®š

åŸºæœ¬çš„ã«ã¯[Nuxt3](https://v3.nuxtjs.org/)ã®ã‚µã‚¤ãƒˆã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šé€²ã‚ã¦ã„ã£ãŸã€‚  
Betaã ã£ãŸæ™‚æœŸã«è©¦ã—ãŸæ™‚ã¯`nuxi`ãŒå‘¼ã³å‡ºã›ãªã‹ã£ãŸã‚Šãƒã‚°ãŒã‚ã£ãŸãŒãã†ã„ã£ãŸãƒã‚°ã¨ã‹ã‚‚æ²»ã£ã¦ã„ã¦`npx nuxi init nuxt-app`ã™ã‚“ãªã‚Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããŸã€‚  
çµæ§‹æ™®æ®µã¯`create-**-app`ã¨ã‹ä½¿ã‚ãšã«ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§ç’°å¢ƒã‚’ä½œã£ã¦ã—ã¾ã†ã“ã¨ãŒå¤šã„ã‘ã©ã‚³ãƒãƒ³ãƒ‰ä¸€ã¤ã§ç’°å¢ƒãŒæ•´ã†ã®ã‚ã£ã¡ã‚ƒæ¥½ã§ã„ã„ã§ã™ã­ã€‚

Nuxtã¯ç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸã‚ã¨ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚³ãƒãƒ³ãƒ‰ãŒå¿…è¦ãªã®ã§`npm i`ã—ã¦ãŠãã€‚

```log
Nuxt CLI v3.0.0-rc.4

  > Local:    http://localhost:3000/
  > Network:  http://192.168.10.18:3000/

```

çˆ†é€Ÿã§localhostãŒç«‹ã¡ä¸ŠãŒã£ã¦ã³ã£ãã‚Šã™ã‚‹ã‘ã©ãƒªãƒ³ã‚¯ã‚’é–‹ãã¨ãƒ­ãƒ¼ãƒ‰ç”»é¢ãŒé–‹ã„ã¦è‹¥å¹²å¾…ãŸã•ã‚Œã‚‹ã€‚  
ãã‚Œã§ã‚‚é–‹ç™ºç’°å¢ƒã®ç«‹ã¡ä¸ŠãŒã‚Šã¯ååˆ†æ—©ã„ã®ã§ã‚¹ãƒˆãƒ¬ã‚¹ã¯ç„¡ã„ã€‚

![](/img/post/renewal/nuxt3-loading.jpg)

â€»ç”»åƒã¯`v3.0.0-rc.4`æ™‚ç‚¹ã§ã®ãƒ­ãƒ¼ãƒ‰ç”»é¢`v3.0.0-rc.5`ã ã¨ã¾ãŸé•ã†ãƒ­ãƒ¼ãƒ‰ç”»é¢ã«ãªã£ã¦ã„ãŸã€‚

ã“ã†ã„ã†ç´°ã‹ã„ã¨ã“ã‚ã‚‚ã¡ã‚ƒã‚“ã¨ä½œã‚Šè¾¼ã‚“ã§ã„ã‚‹ã®ã§Vueé–¢é€£ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å¥½ãã ãªã¨æ€ã†ã€‚

### Vue3ã®å£

ã¨ã‚Šã‚ãˆãšã§é€²ã‚ãŸã¯ã„ã„ãŒå‰ã«Vueã‚’æ›¸ã„ãŸã®ãŒ2.xã®é ƒãªã®ã§æ›¸ãæ–¹ã‚’å¿˜ã‚Œã¦ã„ãŸã‚Šæ–°ã—ã„APIãŒåˆ†ã‹ã‚‰ãªã‹ã£ãŸã‚Šã§çµæ§‹è‹¦åŠ´ã—ãŸã€‚  
Composition APIã£ã¦ã„ã†ã®ä½¿ã£ã¦ãŠã‘ã°ã„ã„ã‚“ã§ã—ã‚‡ï¼Ÿã¨ã„ã†ãƒ¬ãƒ™ãƒ«æ„Ÿã§ã¨ã‚Šã‚ãˆãšé€²ã‚ã¦ã„ãã€‚

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ä½œæˆ

ã¨ã‚Šã‚ãˆãšãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‹ã‚‰ä½œã£ã¦ã„ã“ã†ã¨æ€ã£ã¦ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ç·¨é›†ã‹ã‚‰å§‹ã‚ãŸã€‚  
åŸºæœ¬çš„ã«ã¯`layout > default.vue`ã«åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä½œæˆã—ã¦ã€ãã‚Œä»¥å¤–ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå¿…è¦ãªå ´åˆã¯`layout`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§åˆ¥ã®åå‰ã‚’ä½œã£ã¦ã„ãæ„Ÿã˜ã‚‰ã—ã„ã€‚  
ä»Šå›ã®ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã®éš›ã«ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚‚è‡ªåˆ†ã§å®Ÿè£…ã—ã‚ˆã†ã¨æ€ã£ãŸã®ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå´ã§ãã‚Œã‚’å®šç¾©ã™ã‚‹ã€‚

åŸºæœ¬çš„ãªã‚„ã‚Šæ–¹ã¯[å‰ã«è¨˜äº‹ã«ã—ãŸã‚‚ã®](https://zenn.dev/ken7253/articles/darkmode-approach)ã‚’è¦‹è¿”ã—ãªãŒã‚‰è¨­å®šã—ã¦ã„ã£ãŸã€‚  

- CSSå´ã§é…è‰²ã‚’å®šç¾©
- ãã‚Œã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç”¨æ„
- åˆ¥é€”metaã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç”¨æ„

ã¨ã„ã†æ„Ÿã˜ãªã®ã§ãã‚Œã‚’é€²ã‚ã¦ã„ãã€‚  
[è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«](https://github.com/ken7253/d6/blob/aa6c44335961c416e98d595a3d7c9e88cd68cb16/layouts/default.vue)ï¼ˆ[æœ€æ–°ç‰ˆ](https://github.com/ken7253/d6/blob/main/layouts/default.vue)ï¼‰

ä¸€å¿œãã‚Œã£ã½ããƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã¨ã®åˆ‡ã‚Šæ›¿ãˆãŒã§ãã¦ã„ã‚‹ãŒç«¯æœ«ã®ãƒ†ãƒ¼ãƒãŒãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã ã£ãŸå ´åˆã«ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã¸ã®åˆ‡ã‚Šæ›¿ã‚ã‚Šã§ã¡ã‚‰ã¤ããŒç™ºç”Ÿã—ã¦ã—ã¾ã†ã®ã§å¾Œã€…ç›´ã—ã¦ãŠã“ã†ã¨æ€ã†ã€‚  

â€»å¾Œã«[`Nuxt ColorMode`](https://color-mode.nuxtjs.org/)ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¥ã‚Œã¦ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚

### ä»¥å‰ã®ã‚µã‚¤ãƒˆã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç§»æ¤

ä»¥å‰ã®ã‚µã‚¤ãƒˆã‚‚ãã“ã¾ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ç„¡ã„ã®ã§ç§»æ¤ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚å¤šããªã„ã®ã§ã‚µã‚¯ãƒƒã¨çµ‚ã‚ã£ãŸã€‚  
[Zennã®è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’å–ã£ã¦ãã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](https://github.com/ken7253/d6/blob/main/components/ZennArticle.vue)ã¨[JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…ƒã«åˆ¶ä½œç‰©ä¸€è¦§ã‚’ç”Ÿæˆã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](https://github.com/ken7253/d6/blob/main/components/WorksList.vue)ãã‚‰ã„ãªã®ã§ãã“ã¾ã§ãƒˆãƒ©ãƒ–ãƒ«ã‚‚èµ·ããšã«Vue2ã‹ã‚‰3ã¸ã®å¤‰æ›´ãŒã§ããŸã€‚  

[Zennã®è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’å–ã£ã¦ãã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](https://github.com/ken7253/d6/blob/main/components/ZennArticle.vue)ã«ã¤ã„ã¦ä»¥å‰ã¯`axios`ã‚’ä½¿ã£ã¦ã„ãŸãŒåˆ¥ã«`fetch`ã§ã„ã„ã˜ã‚ƒã‚“ã¨ã„ã†ã“ã¨ã§ãã“ã ã‘ã¯æ›¸ãæ›ãˆã‚’ãŠã“ãªã£ãŸã‘ã©ã»ã¨ã‚“ã©æ˜”ã®ã‚³ãƒ¼ãƒ‰ã¨ãƒ­ã‚¸ãƒƒã‚¯ã¯åŒã˜ã€‚  

### è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã®ç§»è¡Œ

è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’ç§»è¡Œã™ã‚‹ã«ã‚ãŸã£ã¦VuePressã®ã‚ˆã†ã«è‡ªå‹•ã§ãƒ‘ãƒ¼ã‚¹ã¯ã—ã¦ãã‚Œãªã•ãã†ãªã®ã§ã€Markdownãƒ‘ãƒ¼ã‚µã‚’å…¥ã‚Œã‚ˆã†ã¨æ€ã£ã¦ã„ãŸãŒ  
ã©ã†ã‚„ã‚‰[Nuxt Content](https://content.nuxtjs.org/)ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã®ã‚’ç™ºè¦‹ã—ãŸã€‚Nuxtã®`content`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¤ã„ã¦ã®èª¬æ˜ã¯[ã“ã£ã¡](https://v3.nuxtjs.org/guide/directory-structure/content)

ã‚µã‚¯ãƒƒã¨èª­ã‚“ã æ„Ÿã˜`content`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`.md`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¥ã‚Œã¦ã†ã¾ã„ã“ã¨ã‚„ã‚‹ã¨è¨˜äº‹ï¼ˆãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ï¼‰ã‚’ç”Ÿæˆã—ã¦ãã‚Œãã†ãªã®ã§ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚  

#### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

åˆ¥é€”`@nuxt/content`ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¿…è¦ãã†ãªã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚  

```sh
npm install --save-dev @nuxt/content
```

ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦`nuxt.config.ts`ã«ä¸‹è¨˜ã®é …ç›®ã‚’è¿½åŠ ã™ã‚‹ã€‚

```ts{5-10}[nuxt.config.ts]
import { defineNuxtConfig } from 'nuxt'

// https://v3.nuxtjs.org/api/configuration/nuxt.config
export default defineNuxtConfig({
  modules: [
    '@nuxt/content'
  ],
  content: {
    // https://content.nuxtjs.org/api/configuration/
  },
  app: {
    head: {
      meta: [
        { name: 'color-scheme', content: 'light dark' },
      ],
      link: [
        { rel: 'stylesheet', href: '/assets/css/main.css' },
      ],
    }
  }
})
```

ã¨ã‚Šã‚ãˆãšæ§‹æˆã¨ã—ã¦ã¯ã“ã®ã‚ˆã†ã«ã—ãŸã„ã®ã§è¨­å®šã‚’ã—ã¦ã„ãã€‚

```txt
pages
â”— post
  â”£ index.vue   // ãƒ–ãƒ­ã‚°ä¸€è¦§
  â”— [...slug].vue  // å€‹åˆ¥è¨˜äº‹
```

`/content/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚ã“ã‚“ãªæ„Ÿã˜ã§ãƒ‘ã‚¹ã‚’ã‚ã‚ã›ã¦ãŠãã¨è‰¯ã•ãã†ã€‚  

```txt
Content
â”— post
  â”— // ...å„è¨˜äº‹ãƒ‡ãƒ¼ã‚¿
```

è¨˜äº‹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯`[...slug].vue`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Œã°ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ãã‚Œã‚‹ã‚‰ã—ã„ã€‚  
å†…éƒ¨ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«`<ContentDoc></ContentDoc>`ã¨ã„ã†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å…¥ã‚Œã‚Œã°ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’å±•é–‹ã—ã¦ãã‚Œã‚‹ã€‚

```vue{}[[...slug].vue]
<template>
  <div>
    <ContentDoc></ContentDoc>
  </div>
</template>
```

ç‰¹ã«ã©ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã¨ã‹ã€APIã¸ã®æ¥ç¶šã¨ã‹ã®å‡¦ç†ã‚’è¨˜è¼‰ã—ãªãã¦ã‚‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆã‚ã›ã¦`[...slug].vue`ã‚’ä½œã‚‹ã ã‘ã§è¨˜äº‹ã‚’è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ã®ã§ã‚µã‚¯ãƒƒã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã‚’ä½œã‚ŠãŸã„äººã«ã‚‚è‰¯ã•ãã†ã€‚

#### è¨˜äº‹ãƒšãƒ¼ã‚¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¦‹ãŸç›®ã§ã‚‚ã¾ã‚ã„ã„ãŒä¸€éƒ¨è¦‹ãŸç›®ã‚’å¤‰æ›´ã—ãŸã‚Šã—ãŸã„ã®ã§ã¡ã‚‡ã£ã¨æ‰‹ã‚’åŠ ãˆã¦ã„ãã€‚  
æœ€åˆã¯è¨˜äº‹ãƒšãƒ¼ã‚¸ç”¨ã®cssã‚’ç”¨æ„ã—ã¦ãã‚Œã‚’è¨˜äº‹ãƒšãƒ¼ã‚¸ã ã‘ã§èª­ã¿è¾¼ã¾ã›ã‚ˆã†ã‹ã¨æ€ã£ãŸã‘ã©ã€ä¸€å¿œã¡ã‚ƒã‚“ã¨ã—ãŸã‚„ã‚Šæ–¹ãŒã‚ã£ãŸã®ã§ãã£ã¡ã§ã‚„ã£ã¦ã„ãã€‚

![](/img/post/renewal/default-visual.jpg)

[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://content.nuxtjs.org/guide/writing/markdown#customizing)ã ã¨ã€`/components/content/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«[component sources](https://github.com/nuxt/content/tree/main/src/runtime/components/Prose)ã‚’è¦‹ãªãŒã‚‰åŒã˜åå‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚Œã°ã„ã‘ãã†ãªã®ã§è©¦ã—ã¦ã¿ã‚‹ã€‚  

> - Checkout the original component sources.
> - Use the exact same props.
> - Name it the same in your components/content/ directory.
> - Make it yours ğŸš€.

1. å¤‰æ›´ã—ãŸã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆã‚¿ã‚°ï¼‰ã‚’æ±ºã‚ã‚‹
2. `Prose**.vue`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`component/content/`ã«ä½œæˆ
3. [component sources](https://github.com/nuxt/content/tree/main/src/runtime/components/Prose)ã¨åŒã˜`prpos`ã‚’åˆ©ç”¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹

ã¨ã„ã£ãŸæ„Ÿã˜ã§é€²ã‚ã‚Œã°ç·¨é›†å¯èƒ½ã€‚  

[ä½œã£ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](https://github.com/ken7253/d6/tree/main/components/content)

#### ãƒã‚¤ãƒ©ã‚¤ãƒˆã®è¿½åŠ 

ãƒã‚¤ãƒ©ã‚¤ãƒˆã®å°å…¥ã¯`nuxt.config.ts > content > highlight`ã‹ã‚‰ãƒ†ãƒ¼ãƒã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§æœ‰åŠ¹åŒ–ã§ãã‚‹ã€‚  
ã—ã‹ã—ã€ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã£ãŸã®ã§ä¸€æ—¦ãƒã‚¤ãƒ©ã‚¤ãƒˆã®æŒ‡å®šã‚’åˆ¥ã®ã‚‚ã®ã«å¤‰ãˆã¦å¯¾å¿œã—ãŸã€‚  

```log
[nuxt] [request error] No grammar provided for <source.diff>
  at Registry.e._collectDependenciesForDep (/G:/dev-local/d6/node_modules/shiki-es/dist/shiki.mjs:12:24999)
  at Registry.<anonymous> (/G:/dev-local/d6/node_modules/shiki-es/dist/shiki.mjs:12:25495)
  at /G:/dev-local/d6/node_modules/shiki-es/dist/shiki.mjs:12:23016
  at Object.next (/G:/dev-local/d6/node_modules/shiki-es/dist/shiki.mjs:12:23125)
  at s (/G:/dev-local/d6/node_modules/shiki-es/dist/shiki.mjs:12:21828)
```

Shikiã®[Language](https://github.com/shikijs/shiki/blob/main/docs/languages.md#all-languages)ã‚’è¦‹ã¦ã¿ã‚‹ã¨`diff`ã«ã¯å¯¾å¿œã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ãã¡ã‚“ã¨å¯¾å¿œã™ã‚Œã°è¡¨ç¤ºã•ã‚Œãã†ã€‚  

ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰æ™‚ã«è‡ªå‹•ã§ãƒ†ãƒ¼ãƒã‚’å¤‰ãˆã¦ã»ã—ã„ãªãƒ¼ã€ã¨æ€ã£ã¦ã„ãªãŒã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã¨[è¤‡æ•°ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒ](https://content.nuxtjs.org/api/configuration#highlighttheme)ã«å¯¾å¿œã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§è¨­å®šã—ã¦ã¿ãŸã€‚  
ã—ã‹ã—ã†ã¾ãè¨­å®šã§ããšã€å‹å®šç¾©ã‚’è¦‹ã‚‹ã¨å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚ˆã†ãªè¨­å®šã¯ã§ããªã„ã£ã½ã„ã®ã§ä¸€æ—¦ã¯ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å†…éƒ¨ã®èƒŒæ™¯è‰²ã‚’å›ºå®šã—ã¦å¯¾å¿œã—ãŸã€‚

```ts{5}[module.d.ts]
highlight: false | {
    /**
      * Default theme that will be used for highlighting code blocks.
      */
    theme?: Theme;
    /**
      * Preloaded languages that will be available for highlighting code blocks.
      */
    preload?: Lang[];
};
```

â€»`Theme`å‹ã¯ãƒ†ãƒ¼ãƒåã¨ã—ã¦æŒ‡å®šã§ãã‚‹æ–‡å­—åˆ—ã®unionå‹

### ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®è¿½åŠ 

æœ€åˆã¯ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…ã‚’è‡ªåˆ†ã§è¡Œã£ã¦ã„ãŸãŒã€[`Nuxt ColorMode`](https://color-mode.nuxtjs.org/)ã¨ã„ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ã®ã§ãã¡ã‚‰ã‚’åˆ©ç”¨ã™ã‚‹ã€‚  
åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¨ã—ã¦ã¯`Nuxt Content`ã¨åŒã˜ã‚ˆã†ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€`nuxt.config.ts`ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã€‚

```ts{4,7-8}[Nuxt.config.ts]
export default defineNuxtConfig({
  modules: [
    '@nuxt/content',
    '@nuxtjs/color-mode',
  ],
  colorMode: {
    dataValue: 'theme',
  },
  // ...
});
```

`colorMode`ã®ä¸­ã«é …ç›®ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§è¨­å®šã‚’å¤‰æ›´å¯èƒ½ã€‚  
ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã‚µã‚¤ãƒˆã®ã‚«ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®çŠ¶æ…‹ç®¡ç†ï¼ˆè¨­å®šçŠ¶æ³ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãã‚Œã‚‹ã£ã½ã„ï¼Ÿï¼‰ã®ã¿ã‚’è¡Œã†ã®ã§åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒ†ãƒ¼ãƒã¯è‡ªåˆ†ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚  
ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒ†ãƒ¼ãƒã«å¿œã˜ã¦`html`è¦ç´ ã®ã‚¯ãƒ©ã‚¹åã¨dataå±æ€§ã®å€¤ã‚’å¤‰æ›´ã—ã¦ãã‚Œã‚‹ã®ã§ãã‚Œã«å¿œã˜ã¦CSSå¤‰æ•°ã‚’å·®ã—æ›¿ãˆã‚‹æ–¹æ³•ã§å¯¾å¿œã™ã‚‹ã®ãŒä¸€ç•ªæ¥½ã ã¨æ€ã†ã€‚

```css{}[main.css]
:root {
  --c-static-dark: #333;
  --c-static-darker: #222;
  --c-static-darkest: #111;
  --c-static-light: #ddd;
  --c-static-lighter: #eee;
  --c-static-lightest: #fff;
  --c-static-base-dark: #1f214e;
  --c-static-base-light: #c6c8ec;
  --c-static-secondary: #70909e;
  --c-static-important: #db3131;
}

html:not([class*="dark-mode"]) {
  color-scheme: light;
  --c-dark: var(--c-static-dark);
  --c-darker: var(--c-static-darker);
  --c-darkest: var(--c-static-darkest);
  --c-light: var(--c-static-light);
  --c-lighter: var(--c-static-lighter);
  --c-lightest: var(--c-static-lightest);
  --c-base-dark: var(--c-static-base-dark);
  --c-base-light: var(--c-static-base-light);
  --c-secondary: var(--c-static-secondary);
  --c-important: var(--c-static-important);
}

html.dark-mode {
  color-scheme: dark;
  --c-dark: var(--c-static-light);
  --c-darker: var(--c-static-lighter);
  --c-darkest: var(--c-static-lightest);
  --c-light: var(--c-static-dark);
  --c-lighter: var(--c-static-darker);
  --c-lightest: var(--c-static-darkest);
  --c-base-dark: var(--c-static-base-light);
  --c-base-light: var(--c-static-base-dark);
  --c-secondary: var(--c-static-secondary);
  --c-important: var(--c-static-important);
}
```

ã¡ãªã¿ã«ã“ã®ã‚µã‚¤ãƒˆã®è¨­å®šã¯ä¸Šè¨˜ã®ã‚ˆã†ãªæ„Ÿã˜ï¼ˆ[æœ€æ–°ç‰ˆ](https://github.com/ken7253/d6/blob/main/assets/css/main.css)ï¼‰  
ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ãƒ»ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã§è‰²ãŒå¤‰ã‚ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã‚‹ãŒã€é™çš„ãªå€¤ã‚‚æ¬²ã—ã„å ´åˆã‚‚ã‚ã‚‹ã®ã§`:root`ã§ä¸€æ—¦é™çš„ãªå€¤ã‚’å®šç¾©ã—ã¦ãŠã„ã¦ãã‚Œã‚’ãã‚Œãã‚Œä»£å…¥ã—ã¦ã„ãæ„Ÿã˜ã§æ›¸ã„ã¦ã„ã¾ã™ã€‚  
å¤šåˆ†ã“ã®ã‚„ã‚Šæ–¹ãŒãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«å¯¾å¿œã—ã¦ã„ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã¨ã‹ã§ã‚‚ä¸€èˆ¬çš„ã ã¨æ€ã†ï¼ˆâ€»è¦æ¤œè¨¼ï¼‰

æ©Ÿèƒ½ã¨ã—ã¦ã¯ãã“ã¾ã§å¤§ããªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ãªã„ãŒãã¡ã‚“ã¨[prefers-color-modeã®ä»•æ§˜](https://drafts.csswg.org/mediaqueries-5/#prefers-color-scheme)ã‚’è€ƒæ…®ã—ã¦ã„ãŸã‚Šâ€»ã€è¨­å®šå€¤ã®è¨˜æ†¶ãªã©ç´°ã‹ã„ç®‡æ‰€ã‚‚ãã¡ã‚“ã¨ä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§æ©Ÿèƒ½ãŒä¸è¶³ã™ã‚‹ã“ã¨ã¯ãªã•ãã†ã€‚  
ã¾ãŸã€ãƒšãƒ¼ã‚¸å€‹åˆ¥ã§ã‚«ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’å¼·åˆ¶ã§ãã‚‹æ©Ÿèƒ½ã‚‚ã‚ã‚‹ã®ã§æ®µéšçš„ã«ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®å°å…¥ã‚’ã—ã¦ã„ãæ–¹æ³•ãªã©ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚  

â€»`prefers-color-mode`ã«ã¯`'light'`ã¨`'dark'`ä»¥å¤–ã®å€¤ã‚‚å…¥ã£ã¦ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§æƒ³å®šã—ã¦ã„ãªã„å€¤ãŒå…¥ã£ã¦ããŸå ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ãŒå¿…è¦

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«`useColorMode`ã‹ã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¦`<ColorModeInstance>.preference`ã®å€¤ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã‚«ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®å¤‰æ›´ãŒå¯èƒ½ã€‚  
ç¾åœ¨ã®å€¤ã¯`<ColorModeInstance>.value`ã§å‚ç…§ã§ãã‚‹ã€‚

```vue{}[ColorMode.vue]
<script lang="ts" setup>
import { useColorMode } from '#imports';
const colorMode = useColorMode();

const toggleDarkMode = () => {
  colorMode.preference = colorMode.value === 'dark' ? 'light' : 'dark';
  console.log(`current theme ${colorMode.value}`);
}
</script>
```
